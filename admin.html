<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Nighthawks FF | Admin Panel</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
  <script>
    if (localStorage.getItem("admin") !== "true") {
      window.location.href = "admin-login.html";
    }
  </script>

  <div class="nav-bar">
    <div class="nav-title" style="color:#fff; font-weight:bold; font-size:20px;">
      <span style="color:var(--primary-blue);">Nighthawks</span> Admin
    </div>
    <div class="nav-right">
      <button onclick="adminLogout()">Logout</button>
    </div>
  </div>

  <div class="page">
    
    <div class="admin-tabs">
      <button onclick="showTab('matches')" class="active">Matches</button>
      <button onclick="showTab('users')">Users</button>
      <button onclick="showTab('teams')">Teams & PDF</button>
      <button onclick="showTab('settings')">Settings</button>
    </div>

    <div id="tab-matches" class="tab-content active" style="display:block;">
      <div class="admin-control">
        <h3>Create New Match</h3>
        
        <label style="color:#aaa; font-size:12px;">Match Title</label>
        <input id="m-title" placeholder="e.g. Daily Scrims #1">
        
        <label style="color:#aaa; font-size:12px;">Map Name</label>
        <input id="m-map" placeholder="e.g. Bermuda / Purgatory">
        
        <label style="color:#00e5ff; font-size:12px; font-weight:bold;">IDP Time (ID/Pass)</label>
        <input id="m-time" placeholder="e.g. 7:30 PM">

        <button onclick="saveMatch()" class="admin-btn open">Save Match</button>
      </div>
      
      <h3>Existing Matches</h3>
      <div id="adminMatchList"></div>
    </div>

    <div id="tab-users" class="tab-content">
      <h3>Registered Users</h3>
      <div id="adminUserList"></div>
    </div>

    <div id="tab-teams" class="tab-content">
      <div class="admin-control">
        <h3>Registration Control</h3>
        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
          <button onclick="toggleReg(true)" class="admin-btn open">Open Registration</button>
          <button onclick="toggleReg(false)" class="admin-btn close">Close Registration</button>
        </div>
        <p id="regStatusDisplay" style="font-weight:bold; color:#aaa;"></p>
      </div>

      <div class="admin-control">
        <h3>Downloads</h3>
        <div style="display: flex; gap: 10px;">
          <button onclick="downloadAdminPDF()" style="background:#333; color:#fff; border:1px solid #555; padding:10px; border-radius:6px; cursor:pointer; flex:1;">Teams PDF</button>
          <button onclick="downloadUsersPDF()" style="background:#333; color:#fff; border:1px solid #555; padding:10px; border-radius:6px; cursor:pointer; flex:1;">Users PDF</button>
        </div>
      </div>

      <h3>Registered Teams</h3>
      <div id="adminTeamList"></div>
    </div>

    <div id="tab-settings" class="tab-content">
      <div class="admin-control">
        <h3>Payment Settings</h3>
        <select id="paymentMode" onchange="savePaymentSettings()">
          <option value="free">Free Mode</option>
          <option value="paid">Paid Mode (QR)</option>
        </select>

        <div id="qrSection" style="display:none; margin-top:10px;">
          <label>QR Code Image URL:</label>
          <input id="qrCodeUrl" placeholder="https://..." oninput="savePaymentSettings()">
          <img id="previewQR" src="" style="width:100px; margin-top:5px; border-radius:5px; border:1px solid #333;">
        </div>
      </div>
    </div>

  </div>

  <script src="script.js"></script>
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
       showTab('matches');
    });
  </script>
</body>
</html>